<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Carrefour Property</title>

<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

<!-- Vendor CSS -->
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/dataTables.bootstrap5.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.14.0-beta3/css/bootstrap-select.min.css" />
<link rel="stylesheet" href="../../assets/vendor/fancybox/fancybox.css" />
<link rel="stylesheet" href="../../assets/vendor/jquery.tagsinput/jquery.tagsinput-revisited.min.css">

<!-- Core CSS -->
<link rel="stylesheet" href="../../assets/core/css/core-main.css">
<link rel="stylesheet" href="../../assets/sass/imports.scss">

<!-- Libs JS -->
<script defer src="../../assets/libs/jquery/jquery.min.js"></script>

<!-- Bootstrap JS -->
<script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/bs-custom-file-input/1.3.4/bs-custom-file-input.min.js"></script>

<!-- Vendor JS -->
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.3/purify.min.js"></script>
<script defer src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
<script defer src="https://cdn.datatables.net/1.13.4/js/dataTables.bootstrap5.min.js"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.14.0-beta3/js/bootstrap-select.min.js"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.14.0-beta3/js/i18n/defaults-pt_BR.min.js"></script>
<script defer src="../../assets/vendor/fancybox/fancybox.umd.js"></script>
<script defer src="../../assets/vendor/jquery.tagsinput/jquery.tagsinput-revisited.min.js"></script>


<!-- Core JS -->
<script defer src="../../assets/core/js/core-main.js"></script>
<script defer src="../../assets/core/js/core-form.js"></script>

<script>
    /*! --------------------------------------------------------------------
     * Enable tooltips
     * --------------------------------------------------------------------*/
    addEventListener("DOMContentLoaded", function () {
        const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]');
        const tooltipList = [...tooltipTriggerList].map((tooltipTriggerEl) => new bootstrap.Tooltip(tooltipTriggerEl));
    })

    /*! --------------------------------------------------------------------
    * mostra senha
    * --------------------------------------------------------------------*/
    let btnShowAllPassword = document.querySelectorAll(".btn-showPass");

    btnShowAllPassword.forEach((item) => {
        item.addEventListener("click", () => {
            item.children[0].classList.toggle("bi-unlock");
            const inputPass = item.parentNode.children[0];
            const type =
                inputPass.getAttribute("type") === "password" ? "text" : "password";
            inputPass.setAttribute("type", type);
        });
    });

    /*! --------------------------------------------------------------------
     * currentYear
     * --------------------------------------------------------------------*/
    const currentYear = new Date().getFullYear();
    const divCurrentYear = document.querySelector('[data-js="currentYear"]')
    if (divCurrentYear) {
        divCurrentYear.textContent = currentYear;
    }

    /* --------------------------------------------------------------------
    * - navbarSideCollapse
    ---------------------------------------------------------------------- */
    (() => {
        "use strict";
        document.querySelector("#navbarSideCollapse")?.addEventListener("click", () => {
            document.querySelector(".offcanvas-collapse").classList.toggle("open");
        });
    })();

    /*! --------------------------------------------------------------------
     * navigation-active
     * --------------------------------------------------------------------*/
    addEventListener("DOMContentLoaded", function () {
        const currentUrl = window.location.pathname;
        const navLinks = document.querySelectorAll(
            `.navbar-nav .nav-item a[href$="${currentUrl}"]`
        );

        navLinks.forEach(function (link) {
            link.classList.add("active");

            const dropdownParent = link.closest(".nav-item.dropdown");
            dropdownParent?.classList.add("active");
        });
    });

    /* --------------------------------------------------------------------
    * - btnScrollToTop
    ---------------------------------------------------------------------- */
    addEventListener("DOMContentLoaded", function () {
        const btnScrollToTop = document.querySelector('[data-scroll="top"]')

        if (btnScrollToTop) {
            btnScrollToTop.onclick = () => window.scrollTo({
                top: 0,
                behavior: "smooth"
            });
            window.onscroll = () => window.scrollY > 10 ? btnScrollToTop.style.opacity = 1 : btnScrollToTop.style.opacity = 0
        }
    });

    /* --------------------------------------------------------------------
    * - tab-datatable-scroll-x
    ---------------------------------------------------------------------- */
    addEventListener("DOMContentLoaded", function () {
        $(".tab-datatable-scroll-x").DataTable({
            order: [[0, "asc"]],
            ordering: true,
            paging: true,
            info: true,
            scrollX: true,
            scrollCollapse: true,

            lengthMenu: [
                [15, 30, 50, 80, -1],
                [15, 30, 50, 80, "Tudo"],
            ],

            columnDefs: [
                {
                    targets: "no-sort",
                    orderable: false,
                },
            ],

            language: {
                url: "https://cdn.datatables.net/plug-ins/1.13.4/i18n/pt-BR.json",
            },
        });

        $('[data-row="delete"]').click(function () {
            if (!confirm('VocÃª tem certeza que deseja excluir?')) {
                return false;
            }
        })
    })

    /*! --------------------------------------------------------------------
     * DOMPurif protect xss
     * --------------------------------------------------------------------*/
    const sanitize = (string) => DOMPurify.sanitize(string);

    let inputsApp = document.querySelectorAll(".form-control");
    inputsApp.forEach((item) => {
        item.addEventListener("change", (e) => {
            const result = sanitize(e.target.value);
            console.log(result);
        });
    });
</script>
