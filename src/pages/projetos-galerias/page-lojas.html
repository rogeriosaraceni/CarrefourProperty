<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <include src="./includes/head.html"></include>

        <style>
            .box-chart {
                width: 100%;
                height: 500px;
            }
        </style>
    </head>

    <body>
        <header class="header-app">
            <nav class="navbar navbar-expand-xl fixed-top navbar-dark bg-app-roxo py-1">
                <section class="container-fluid">
                    <div class="d-flex flex-column w-100">
                        <include src="./includes/header.html"></include>

                        <include src="./pages/projetos-galerias/nav.html"></include>
                    </div>
                </section>
            </nav>
        </header>

        <main class="main-app">
            <section class="container-fluid">
                <nav aria-label="breadcrumb" class="breadcrumb-app">
                    <div class="card card-body">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item">
                                <a href="../principal/index.html"><i class="bi bi-house-fill"></i></a>
                            </li>
                            <li class="breadcrumb-item">Projetos Galerias</li>
                            <li class="breadcrumb-item active" aria-current="page">Lojas</li>
                        </ol>
                    </div>
                </nav>
            </section>

            <section class="container-fluid">
                <div class="card">
                    <div class="card-body">
                        <div class="box-chart" id="chartdiv-abl"></div>
                    </div>
                </div>
            </section>
        </main>

        <include src="./includes/footer.html"></include>

        <script src="../../assets/vendor/amcharts/index.js"></script>
        <script src="../../assets/vendor/amcharts/xy.js"></script>
        <script src="../../assets/vendor/amcharts/Animated.js"></script>

        <script>
            am5.ready(function () {
                // Create root element
                // https://www.amcharts.com/docs/v5/getting-started/#Root_element
                var root = am5.Root.new("chartdiv-abl");

                // Set themes
                // https://www.amcharts.com/docs/v5/concepts/themes/
                root.setThemes([
                    am5themes_Animated.new(root)
                ]);

                // Create chart
                // https://www.amcharts.com/docs/v5/charts/xy-chart/
                var chart = root.container.children.push(am5xy.XYChart.new(root, {
                    panX: false,
                    panY: false,
                    wheelX: "panX",
                    wheelY: "zoomX",
                    layout: root.verticalLayout
                }));

                // Add scrollbar
                // https://www.amcharts.com/docs/v5/charts/xy-chart/scrollbars/
                // chart.set("scrollbarX", am5.Scrollbar.new(root, {
                //     orientation: "horizontal"
                // }));

                var data = [
                    {
                        "situacao": "BIG",
                        "vago": 18.784,
                        "ocupado": 134.158,
                    },
                    {
                        "situacao": "CRF",
                        "vago": 23.400,
                        "ocupado": 281.807,
                    },
                ]

                // Create axes
                // https://www.amcharts.com/docs/v5/charts/xy-chart/axes/
                var xRenderer = am5xy.AxisRendererX.new(root, {});
                var xAxis = chart.xAxes.push(am5xy.CategoryAxis.new(root, {
                    categoryField: "situacao",
                    renderer: xRenderer,
                    tooltip: am5.Tooltip.new(root, {})
                }));

                xRenderer.grid.template.setAll({
                    location: 1
                })

                xAxis.data.setAll(data);

                var yAxis = chart.yAxes.push(am5xy.ValueAxis.new(root, {
                    min: 0,
                    max: 100,
                    numberFormat: "#'%'",
                    strictMinMax: true,
                    calculateTotals: true,
                    renderer: am5xy.AxisRendererY.new(root, {
                        strokeOpacity: 0.1
                    })
                }));

                // Add legend
                // https://www.amcharts.com/docs/v5/charts/xy-chart/legend-xy-series/
                var legend = chart.children.push(am5.Legend.new(root, {
                    centerX: am5.p50,
                    x: am5.p50
                }));

                // Add series
                // https://www.amcharts.com/docs/v5/charts/xy-chart/series/
                function makeSeries(name, fieldName) {
                    var series = chart.series.push(am5xy.ColumnSeries.new(root, {
                        name: name,
                        stacked: true,
                        xAxis: xAxis,
                        yAxis: yAxis,
                        valueYField: fieldName,
                        valueYShow: "valueYTotalPercent",
                        categoryXField: "situacao"
                    }));

                    series.columns.template.setAll({
                        tooltipText: "{name}, {categoryX}:{valueYTotalPercent.formatNumber('#.#')}%",
                        tooltipY: am5.percent(10)
                    });
                    series.data.setAll(data);

                    // Make stuff animate on load
                    // https://www.amcharts.com/docs/v5/concepts/animations/
                    series.appear();

                    series.bullets.push(function () {
                        return am5.Bullet.new(root, {
                            sprite: am5.Label.new(root, {
                                text: "{valueYTotalPercent.formatNumber('#.#')}%",
                                fill: root.interfaceColors.get("alternativeText"),
                                centerY: am5.p50,
                                centerX: am5.p50,
                                populateText: true
                            })
                        });
                    });

                    legend.data.push(series);
                }

                makeSeries("Ocupado", "ocupado");
                makeSeries("Vago", "vago");

                // Make stuff animate on load
                // https://www.amcharts.com/docs/v5/concepts/animations/
                chart.appear(1000, 100);

            }); // end am5.ready()
        </script>


    </body>
</html>
